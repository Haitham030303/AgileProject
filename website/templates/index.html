{% extends "base.html" %}

{% block title %}
    Home 
{% endblock %}

{% block main %}
  
{% for entry in entries %}
<div class="card">
    <div class="title-grid">
        <div class="P-Title">{{ entry.title }}</div>
        <div class="status">Status: {{entry.status}}</div>
    </div>
    <div class="P-owner">
        {% if entry.leader_names|length == 1 %}
            Project Leader: {{ entry.leader_names[0] }}
        {% elif entry.leader_names|length > 1 %}
            Project Leaders: {{ entry.leader_names[0] }}, {{ entry.leader_names[1] }}, ...
        {% endif %}
    </div>  
    {% if entry.collaborator_names %}
        <div class="Project-collaborators">
            {% if entry.collaborator_names|length == 1 %}
                Project Collaborator: {{ entry.collaborator_names[0] }}
            {% elif  entry.collaborator_names|length > 1 %}
                Project Collaborators: {{  entry.collaborator_names[0] }}, {{  entry.collaborator_names[1] }}, ...
            {% endif %}
        </div>
     {% endif %}    
    <div class="Description">
        {{ entry.description }}
    </div>
    <div class="card-footer">
        <a href="{{ url_for('views_bp.details', id=entry.id) }}"><button class="homebtn">Details</button></a>
        <a href="{{ url_for('views_bp.add_collaborator', id=entry.id, is_collaborator=entry.is_collaborator) }}">
            <button class="homebtn btn-outline join-btn">Join</button>
        </a>
        </div>     
    <div class="modal-box" id="popup">
        <img src="../static/pictures/checkmark.png"></img>
        <h2>Completed!</h2>
        <h3>You have sucessfully joined the project.</h3>

        <button type="button">OK</button>
    </div>
</div>
{% endfor %}

<script>
    // Find all "Join" button elements
    const joinButtons = document.querySelectorAll(".join-btn");

    // Loop through all "Join" buttons and add a "click" event listener to each of them
    joinButtons.forEach(function(joinButton) {
        joinButton.addEventListener("click", function(event) {
            event.preventDefault(); // prevent the default behavior of the link

            // Show the modal pop up box
            const modalBox = document.querySelector(".modal-box");
            modalBox.style.display = "block";

            // Add an event listener to the "OK" button to hide the modal pop up box when clicked
            const okButton = modalBox.querySelector("button");
            okButton.addEventListener("click", function() {
                modalBox.style.display = "none";
            });
        });
    });
</script>

{% endblock %}
